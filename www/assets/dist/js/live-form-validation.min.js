"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t,n){if("function"==typeof define&&define.amd)define((function(){return{LiveForm:t(e),Nette:n(e)}}));else if("object"===("undefined"==typeof exports?"undefined":_typeof(exports)))module.exports={LiveForm:t(e),Nette:n(e)};else{e.LiveForm=t(e);var r=!e.Nette||!e.Nette.noInit;e.Nette=n(e),r&&e.Nette.initOnLoad()}}("undefined"!=typeof window?window:void 0,(function(e){var t={options:{showMessageClassOnParent:"form-group",messageParentClass:!1,controlErrorClass:"has-error",controlValidClass:"has-success",messageErrorClass:"help-block text-danger",enableHiddenMessageClass:"show-hidden-error",disableLiveValidationClass:"no-live-validation",disableShowValidClass:"no-show-valid",messageTag:"span",messageIdPostfix:"_message",messageErrorPrefix:"",showAllErrors:!0,showValid:!1,wait:!1,focusScreenOffsetY:!1},forms:{},setOptions:function(e){for(var t in e)Object.prototype.hasOwnProperty.call(this.options,t)&&(this.options[t]=e[t])}};return void 0!==e.LiveFormOptions&&t.setOptions(e.LiveFormOptions),t.isSpecialKey=function(e){return 20==e||16==e||9==e||27==e||17==e||91==e||19==e||18==e||93==e||e>=35&&e<=40||45==e||e>=33&&e<=34||e>=112&&e<=123||e>=144&&e<=145},t.setupHandlers=function(t){if(!this.hasClass(t,this.options.disableLiveValidationClass)&&!t.getAttribute("data-lfv-initialized")){t.setAttribute("data-lfv-initialized","true");var n=function(t){t=t||e.event,Nette.validateControl(t.target?t.target:t.srcElement)},r=this;t.addEventListener("change",n),t.addEventListener("blur",n),t.addEventListener("keydown",(function(e){if(!r.isSpecialKey(e.which)&&(!1===r.options.wait||r.options.wait>=200)){r.removeClass(r.getGroupElement(this),r.options.controlErrorClass),r.removeClass(r.getGroupElement(this),r.options.controlValidClass);var t=r.getMessageElement(this);t.innerHTML="",t.className="",r.timeout&&clearTimeout(r.timeout)}})),t.addEventListener("keyup",(function(t){!1!==r.options.wait&&9!==(t=t||e.event).keyCode&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout((function(){n(t)}),r.options.wait))}))}},t.processServerErrors=function(e){for(var t=this.getMessageElement(e),n=this.getMessageParent(e),r=[],a=n.getElementsByClassName(this.options.messageErrorClass),i=a.length-1;i>-1;i--)if(a[i]!=t){var o=a[i].parentNode;o==n&&(r.push(a[i].outerHTML),o.removeChild(a[i]))}r.length>0&&(t.innerHTML=r.join(""))},t.addError=function(e,t){if(!this.hasClass(e,this.options.disableLiveValidationClass)){var n=this.getGroupElement(e);this.setFormProperty(e.form,"hasError",!0),this.addClass(n,this.options.controlErrorClass),this.options.showValid&&this.removeClass(n,this.options.controlValidClass),t=t?this.options.messageErrorPrefix+t:"&nbsp;";var r=this.getMessageElement(e);r.innerHTML=t,r.className=this.options.messageErrorClass}},t.removeError=function(e){if(!this.getFormProperty(e.form,"onLoadValidation")){var t=this.getGroupElement(e);if(this.removeClass(t,this.options.controlErrorClass),e.getAttribute("data-lfv-message-id")){var n=this.getMessageElement(e);n.innerHTML="",n.className=""}this.options.showValid&&(this.showValid(e)?this.addClass(t,this.options.controlValidClass):this.removeClass(t,this.options.controlValidClass))}},t.showValid=function(e){if(e.type){var t=e.type.toLowerCase();if("checkbox"==t||"radio"==t)return!1}var n=JSON.parse(e.getAttribute("data-nette-rules"));return null!==n&&0!=n.length&&(""!=Nette.getEffectiveValue(e)&&!this.hasClass(e,this.options.disableShowValidClass))},t.getGroupElement=function(e){if(!1===this.options.showMessageClassOnParent)return e;for(var t=e;!this.hasClass(t,this.options.showMessageClassOnParent);)if(null===(t=t.parentNode))return e;return t},t.getMessageId=function(e){var t=e.id+this.options.messageIdPostfix;if(e.name&&(!e.id||!e.form.elements[e.name].tagName)){var n=e.name.match(/\[\]$/)?e.name.match(/(.*)\[\]$/)[1]:e.name;t=(e.form.id?e.form.id:"frm")+"-"+n+this.options.messageIdPostfix}for(var r=t,a=0;document.getElementById(r);)r=r+"_"+ ++a;return r},t.getMessageElement=function(e){e.name&&e.name.match(/\[\]$/)&&(e=e.form.elements[e.name].tagName?e:e.form.elements[e.name][0]);var t=e.getAttribute("data-lfv-message-id");t||(t=this.getMessageId(e),e.setAttribute("data-lfv-message-id",t));var n=document.getElementById(t);if(!n){(n=document.createElement(this.options.messageTag)).id=t,"none"!=e.style.display||this.hasClass(e,this.options.enableHiddenMessageClass)||(n.style.display="none");var r=this.getMessageParent(e);r===e.parentNode?r.insertBefore(n,e.nextSibling):r&&("function"==typeof r.append?r.append(n):r.appendChild(n))}return n},t.getMessageParent=function(e){var t=e.parentNode,n=!1;if(!1!==this.options.messageParentClass)for(n=!0;!this.hasClass(t,this.options.messageParentClass);)if(null===(t=t.parentNode)){t=e.parentNode,n=!1;break}if(e.type){var r=e.type.toLowerCase();"checkbox"!=r&&"radio"!=r||"LABEL"!=t.tagName||(t=t.parentNode)}return n||!e.name||e.form.elements[e.name].tagName||(t=t.parentNode),t},t.addClass=function(e,t){e.className?this.hasClass(e,t)||(e.className+=" "+t):e.className=t},t.hasClass=function(e,t){return!!e.className&&e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},t.removeClass=function(e,t){if(this.hasClass(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)"),r=e.className.match(n);e.className=e.className.replace(n," "==r[1]&&" "==r[2]?" ":"")}},t.getFormProperty=function(e,t){return null!=e&&null!=this.forms[e.id]&&this.forms[e.id][t]},t.setFormProperty=function(e,t,n){null!=e&&(null==this.forms[e.id]&&(this.forms[e.id]={}),this.forms[e.id][t]=n)},t}),(function(e){var t={},n={},r={};return t.version="3.0",t.onDocumentReady=function(e){"loading"!==document.readyState?e.call(this):document.addEventListener("DOMContentLoaded",e)},t.addEvent=function(e,t,n){e.addEventListener?e.addEventListener(t,n):"DOMContentLoaded"===t?e.attachEvent("onreadystatechange",(function(){"complete"===e.readyState&&n.call(this)})):e.attachEvent("on"+t,getHandler(n))},t.getValue=function(e){var n;if(e){if(e.tagName){if("radio"===e.type){var r=e.form.elements;for(n=0;n<r.length;n++)if(r[n].name===e.name&&r[n].checked)return r[n].value;return null}if("file"===e.type)return e.files||e.value;if("select"===e.tagName.toLowerCase()){var a=e.selectedIndex,i=e.options,o=[];if("select-one"===e.type)return a<0?null:i[a].value;for(n=0;n<i.length;n++)i[n].selected&&o.push(i[n].value);return o}if(e.name&&e.name.match(/\[\]$/)){for(r=e.form.elements[e.name].tagName?[e]:e.form.elements[e.name],o=[],n=0;n<r.length;n++){var s=r[n].value;("checkbox"===r[n].type&&r[n].checked||"checkbox"!==r[n].type&&""!==s)&&o.push(s)}return o}return"checkbox"===e.type?e.checked:"textarea"===e.tagName.toLowerCase()?e.value.replace("\r",""):e.value.replace("\r","").replace(/^\s+|\s+$/g,"")}return e[0]?t.getValue(e[0]):null}return null},t.getEffectiveValue=function(e,r){var a=t.getValue(e);if(e.getAttribute&&a===e.getAttribute("data-nette-empty-value")&&(a=""),r&&void 0===n[e.name]){n[e.name]=!0;var i={value:a};t.validateControl(e,null,!0,i),a=i.value,delete n[e.name]}return a},t.validateControl=function(e,n,r,a,i){e.name&&e.name.match(/\[\]$/)&&"checkbox"==e.type.toLowerCase()&&(e=e.form.elements[e.name].tagName?e:e.form.elements[e.name][0]),e=e.tagName?e:e[0],n=n||JSON.parse(e.getAttribute("data-nette-rules")||"[]"),a=void 0===a?{value:t.getEffectiveValue(e)}:a,i=i||!t.validateRule(e,":filled",null,a);for(var o=0,s=n.length;o<s;o++){var l=n[o],u=l.op.match(/(~)?([^?]+)/),f=l.control?e.form.elements.namedItem(l.control):e;if(l.neg=u[1],l.op=u[2],l.condition=!!l.rules,f&&(!i||l.condition||":filled"===l.op)){f=f.tagName?f:f[0];var d=t.validateRule(f,l.op,l.arg,e===f?a:void 0);if(null!==d)if(l.neg&&(d=!d),l.condition&&d){if(!t.validateControl(e,l.rules,r,a,":blank"!==l.op&&i))return!1}else if(!l.condition&&!d){if(t.isDisabled(f))continue;if(!r){var m=Array.isArray(l.arg)?l.arg:[l.arg],c=l.msg.replace(/%(value|\d+)/g,(function(n,r){return t.getValue("value"===r?f:e.form.elements.namedItem(m[r].control))}));t.addError(f,c)}return!1}}}return"number"!==e.type||e.validity.valid?(r||LiveForm.removeError(e),!0):(r||t.addError(e,"Please enter a valid value."),!1)},t.validateForm=function(e,n){var r=e.form||e,a=!1;if(LiveForm.setFormProperty(r,"hasError",!1),r["nette-submittedBy"]&&null!==r["nette-submittedBy"].getAttribute("formnovalidate")){var i=JSON.parse(r["nette-submittedBy"].getAttribute("data-nette-validation-scope")||"[]");if(!i.length)return!0;a=new RegExp("^("+i.join("-|")+"-)")}var o,s,l={},u=!0;for(o=0;o<r.elements.length;o++)if(!(s=r.elements[o]).tagName||s.tagName.toLowerCase()in{input:1,select:1,textarea:1,button:1}){if("radio"===s.type){if(l[s.name])continue;l[s.name]=!0}if(!(a&&!s.name.replace(/]\[|\[|]|$/g,"-").match(a)||t.isDisabled(s)||(u=t.validateControl(s)&&u)||LiveForm.options.showAllErrors))break}return u},t.isDisabled=function(e){if("radio"===e.type){for(var t=0,n=e.form.elements;t<n.length;t++)if(n[t].name===e.name&&!n[t].disabled)return!1;return!0}return e.disabled},t.addError=function(t,n){var r=LiveForm.hasClass(t,LiveForm.options.disableLiveValidationClass);r&&(!n||LiveForm.getFormProperty(t.form,"hasError")||LiveForm.getFormProperty(t.form,"onLoadValidation")||alert(n)),t.focus&&!LiveForm.getFormProperty(t.form,"hasError")&&(LiveForm.focusing||(LiveForm.focusing=!0,t.focus(),setTimeout((function(){LiveForm.focusing=!1;var n=LiveForm.options.focusScreenOffsetY;!1!==n&&t.getBoundingClientRect().top<n&&e.scrollBy(0,t.getBoundingClientRect().top-n)}),10))),r||LiveForm.addError(t,n)},t.validateRule=function(e,n,r,a){a=void 0===a?{value:t.getEffectiveValue(e,!0)}:a,":"===n.charAt(0)&&(n=n.substr(1)),n=(n=n.replace("::","_")).replace(/\\/g,"");for(var i=Array.isArray(r)?r.slice(0):[r],o=0,s=i.length;o<s;o++)if(i[o]&&i[o].control){var l=e.form.elements.namedItem(i[o].control);i[o]=l===e?a.value:t.getEffectiveValue(l,!0)}return t.validators[n]?t.validators[n](e,Array.isArray(r)?i:i[0],a.value,a):null},t.validators={filled:function(t,n,r){return!("number"!==t.type||!t.validity.badInput)||""!==r&&!1!==r&&null!==r&&(!Array.isArray(r)||!!r.length)&&(!e.FileList||!(r instanceof e.FileList)||r.length)},blank:function(e,n,r){return!t.validators.filled(e,n,r)},valid:function(e){return t.validateControl(e,null,!0)},equal:function(e,t,n){if(void 0===t)return null;function r(e){return"number"==typeof e||"string"==typeof e?""+e:!0===e?"1":""}n=Array.isArray(n)?n:[n],t=Array.isArray(t)?t:[t];e:for(var a=0,i=n.length;a<i;a++){for(var o=0,s=t.length;o<s;o++)if(r(n[a])===r(t[o]))continue e;return!1}return!0},notEqual:function(e,n,r){return void 0===n?null:!t.validators.equal(e,n,r)},minLength:function(e,t,n){if("number"===e.type){if(e.validity.tooShort)return!1;if(e.validity.badInput)return null}return n.length>=t},maxLength:function(e,t,n){if("number"===e.type){if(e.validity.tooLong)return!1;if(e.validity.badInput)return null}return n.length<=t},length:function(e,t,n){if("number"===e.type){if(e.validity.tooShort||e.validity.tooLong)return!1;if(e.validity.badInput)return null}return(null===(t=Array.isArray(t)?t:[t,t])[0]||n.length>=t[0])&&(null===t[1]||n.length<=t[1])},email:function(e,t,n){return/^("([ !#-[\]-~]|\\[ -~])+"|[-a-z0-9!#$%&'*+/=?^_`{|}~]+(\.[-a-z0-9!#$%&'*+/=?^_`{|}~]+)*)@([0-9a-z\u00C0-\u02FF\u0370-\u1EFF]([-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,61}[0-9a-z\u00C0-\u02FF\u0370-\u1EFF])?\.)+[a-z\u00C0-\u02FF\u0370-\u1EFF]([-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,17}[a-z\u00C0-\u02FF\u0370-\u1EFF])?$/i.test(n)},url:function(e,t,n,r){return/^[a-z\d+.-]+:/.test(n)||(n="http://"+n),!!/^https?:\/\/((([-_0-9a-z\u00C0-\u02FF\u0370-\u1EFF]+\.)*[0-9a-z\u00C0-\u02FF\u0370-\u1EFF]([-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,61}[0-9a-z\u00C0-\u02FF\u0370-\u1EFF])?\.)?[a-z\u00C0-\u02FF\u0370-\u1EFF]([-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,17}[a-z\u00C0-\u02FF\u0370-\u1EFF])?|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}|\[[0-9a-f:]{3,39}\])(:\d{1,5})?(\/\S*)?$/i.test(n)&&(r.value=n,!0)},regexp:function(e,t,n){var r="string"==typeof t&&t.match(/^\/(.*)\/([imu]*)$/);try{return r&&new RegExp(r[1],r[2].replace("u","")).test(n)}catch(e){}},pattern:function(t,n,r,a,i){if("string"!=typeof n)return null;try{try{var o=new RegExp("^(?:"+n+")$",i?"ui":"u")}catch(e){o=new RegExp("^(?:"+n+")$",i?"i":"")}if(e.FileList&&r instanceof FileList){for(var s=0;s<r.length;s++)if(!o.test(r[s].name))return!1;return!0}return o.test(r)}catch(e){}},patternCaseInsensitive:function(e,n,r){return t.validators.pattern(e,n,r,null,!0)},numeric:function(e,t,n){return("number"!==e.type||!e.validity.badInput)&&/^[0-9]+$/.test(n)},integer:function(e,t,n){return("number"!==e.type||!e.validity.badInput)&&/^-?[0-9]+$/.test(n)},float:function(e,t,n,r){return("number"!==e.type||!e.validity.badInput)&&(n=n.replace(/ +/g,"").replace(/,/g,"."),!!/^-?[0-9]*\.?[0-9]+$/.test(n)&&(r.value=n,!0))},min:function(e,t,n){if("number"===e.type){if(e.validity.rangeUnderflow)return!1;if(e.validity.badInput)return null}return null===t||parseFloat(n)>=t},max:function(e,t,n){if("number"===e.type){if(e.validity.rangeOverflow)return!1;if(e.validity.badInput)return null}return null===t||parseFloat(n)<=t},range:function(e,t,n){if("number"===e.type){if(e.validity.rangeUnderflow||e.validity.rangeOverflow)return!1;if(e.validity.badInput)return null}return Array.isArray(t)?(null===t[0]||parseFloat(n)>=t[0])&&(null===t[1]||parseFloat(n)<=t[1]):null},submitted:function(e){return e.form["nette-submittedBy"]===e},fileSize:function(t,n,r){if(e.FileList)for(var a=0;a<r.length;a++)if(r[a].size>n)return!1;return!0},image:function(t,n,r){if(e.FileList&&r instanceof e.FileList)for(var a=0;a<r.length;a++){var i=r[a].type;if(i&&"image/gif"!==i&&"image/png"!==i&&"image/jpeg"!==i)return!1}return!0},static:function(e,t){return t}},t.toggleForm=function(e,n){var a;for(r={},a=0;a<e.elements.length;a++)e.elements[a].tagName.toLowerCase()in{input:1,select:1,textarea:1,button:1}&&t.toggleControl(e.elements[a],null,null,!n);for(a in r)t.toggle(a,r[a],n)},t.toggleControl=function(e,n,a,i,o){n=n||JSON.parse(e.getAttribute("data-nette-rules")||"[]"),o=void 0===o?{value:t.getEffectiveValue(e)}:o;for(var s,l=!1,u=[],f=function(){t.toggleForm(e.form,e)},d=0,m=n.length;d<m;d++){var c=n[d],g=c.op.match(/(~)?([^?]+)/),v=c.control?e.form.elements.namedItem(c.control):e;if(v){if(s=a,!1!==a){if(c.neg=g[1],c.op=g[2],null===(s=t.validateRule(v,c.op,c.arg,e===v?o:void 0)))continue;c.neg&&(s=!s),c.rules||(a=s)}if(c.rules&&t.toggleControl(e,c.rules,s,i,o)||c.toggle){if(l=!0,i)for(var p=v.tagName?v.name:v[0].name,h=v.tagName?v.form.elements:v,y=0;y<h.length;y++)h[y].name===p&&u.indexOf(h[y])<0&&(h[y].addEventListener("change",f),u.push(h[y]));for(var F in c.toggle||[])Object.prototype.hasOwnProperty.call(c.toggle,F)&&(r[F]=r[F]||(c.toggle[F]?s:!s))}}}return l},t.toggle=function(e,t,n){/^\w[\w.:-]*$/.test(e)&&(e="#"+e);for(var r=document.querySelectorAll(e),a=0;a<r.length;a++)r[a].hidden=!t},t.initForm=function(e){if(t.toggleForm(e),!e.noValidate){e.noValidate=!0,LiveForm.forms[e.id]={hasError:!1,onLoadValidation:!1},e.addEventListener("submit",(function(n){t.validateForm(e)||(n.stopPropagation(),n.preventDefault())}));for(var n=0;n<e.elements.length;n++)LiveForm.setupHandlers(e.elements[n]),LiveForm.processServerErrors(e.elements[n])}},t.initOnLoad=function(){t.addEvent(document,"DOMContentLoaded",(function(){t.init()}))},t.init=function(){for(var e=0;e<document.forms.length;e++)for(var n=document.forms[e],r=0;r<n.elements.length;r++)if(n.elements[r].getAttribute("data-nette-rules")){t.initForm(n),LiveForm.hasClass(n,"validate-on-load")&&(LiveForm.setFormProperty(n,"onLoadValidation",!0),t.validateForm(n),LiveForm.setFormProperty(n,"onLoadValidation",!1));break}t.addEvent(document.body,"click",(function(e){var t=e.target||e.srcElement;t.form&&t.type in{submit:1,image:1}&&(t.form["nette-submittedBy"]=t)}))},t.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},t.inArray=function(e,t){if([].indexOf)return e.indexOf(t)>-1;for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},t.webalize=function(e){e=e.toLowerCase();var n,r="";for(n=0;n<e.length;n++)r+=t.webalizeTable[e.charAt(n)]||e.charAt(n);return r.replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")},t.webalizeTable={"á":"a","ä":"a","č":"c","ď":"d","é":"e","ě":"e","í":"i","ľ":"l","ň":"n","ó":"o","ô":"o","ř":"r","š":"s","ť":"t","ú":"u","ů":"u","ý":"y","ž":"z"},t}));